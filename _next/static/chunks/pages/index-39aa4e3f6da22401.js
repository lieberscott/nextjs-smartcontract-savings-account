(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(92623)}])},96301:function(e,t,n){"use strict";var a=n(37917),r=n(83753),s=n(4463),o=n(85028),i=n(98706);e.exports={contractAddresses:a,myTokenAddess:i,factoryAbi:r,instanceAbi:s,erc20Abi:o,regex:/^[+]?([1-9][0-9]*(?:[\.][0-9]*)?|0*\.0*[1-9][0-9]*)(?:[eE][+-][0-9]+)?$/}},92623:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var a=n(85893),r=n(9008),s=n(7160),o=n.n(s),i=n(34295);function l(){return(0,a.jsxs)("nav",{className:"p-5 border-b-2 flex flex-row",children:[(0,a.jsx)("h1",{className:"py-4 px-4 font-bold text-3xl",children:"Decentralized Savings Account"}),(0,a.jsx)("div",{className:"ml-auto py-2 px-4",children:(0,a.jsx)(i.NL,{moralisAuth:!1})})]})}var c=n(34051),d=n.n(c),u=n(96301),p=n(83078),m=n(67294);function x(e){(0,p.Nr)().account,e.instanceAddress,e.isMain;return(0,a.jsxs)("div",{className:"w-full max-w-lg mt-8",children:[(0,a.jsx)("h2",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-900",children:"Overview:"}),(0,a.jsx)("p",{className:"mb-3 font-light text-gray-500 dark:text-gray-600",children:"This is a different take on multi-sig wallets. It gives users a second layer of security in case their private keys are lost or stolen by limiting the amount of cryptocurrency that can be withdrawn from the account each day, and by introducing a (semi-)trusted safekeeper, who can withdraw tokens if the primary account holder loses access to their account. Note: This can NOT be used to back up centralized exchange accounts."}),(0,a.jsx)("h2",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-900",children:"Project Inspiration:"}),(0,a.jsx)("p",{className:"mb-3 font-light text-gray-500 dark:text-gray-600",children:"The project is taken from an idea in an article written by Vitalik Buterin when he first introduced the Ethereum project in Bitcoin Magazine in 2014:"}),(0,a.jsx)("p",{className:"mb-3 font-light text-gray-500 dark:text-gray-600",children:"Suppose that Alice wants to store a large amount of money, but does not want to risk losing everything if her private key is lost or stolen. She makes a contract with Bob, a semi-trustworthy bank, with the following rules: Alice is allowed to withdraw up to 1 per day, Alice with Bobs approval can withdraw any amount, and Bob alone can withdraw up to 0.05 per day. Normally, Alice will only need small amounts at a time, and if Alice wants more she can prove her identity to Bob and make the withdrawal. If Alices private key gets stolen, she can run to Bob and move the funds into another contract before the thief gets away with more than 1 of the funds. If Alice loses her private key, Bob will eventually be able to recover her funds. And if Bob turns out to be evil, Alice can withdraw her own funds twenty times faster than he can. In short, all of the security of traditional banking, but with almost none of the trust."}),(0,a.jsxs)("p",{className:"mb-3 font-light text-gray-500 dark:text-gray-600",children:["Vitalik Buterin,  ",(0,a.jsx)("a",{href:"#",className:"font-medium text-blue-600 underline dark:text-blue-500 dark:hover:text-blue-600 hover:text-blue-700 hover:no-underline",children:"Bitcoin Magazine, Jan. 23, 2014"})]})]})}var h=n(16750),f=n(35553);function w(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function b(e){var t=(0,p.Nr)(),n=t.chainId,r=t.account,s=(parseInt(n),e.savingsFactoryAddress),o=(0,m.useState)(""),l=o[0],c=o[1],x=(0,m.useState)(""),b=x[0],g=x[1],y=(0,m.useState)(""),v=y[0],k=y[1],N=(0,m.useState)(""),j=N[0],A=N[1],S=(0,m.useState)(""),T=S[0],C=S[1],_=(0,m.useState)(""),D=_[0],E=_[1],M=(0,m.useState)(""),L=M[0],W=M[1],B=(0,m.useState)(""),I=B[0],F=B[1],z=(0,m.useState)(""),R=z[0],H=z[1],J=(0,i.lm)(),O=(0,p.JX)({abi:u.factoryAbi,contractAddress:s,functionName:"getContractFromMainAddress",params:{mainAccount:l,safekeeperAccount:b,mainAccountWithdrawalLimit_Wei:j,safekeeperAccountWithdrawalLimit_Wei:D,name:R},msgValue:0!==I&&I}),P=(O.data,O.runContractFunction),X=(function(){var e,t=(e=d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wait(1);case 3:c(""),g(""),k(""),C(""),A(""),E(""),H(""),J({type:"info",message:"Transaction Complete!",title:"Transaction Notification",position:"topR",icon:"bell"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){w(s,a,r,o,i,"next",e)}function i(e){w(s,a,r,o,i,"throw",e)}o(void 0)}))})}(),function(e){if(""===e||e.length>16)return!1;return!!e.match(/^([0-9]+(?:[\.][0-9]*)?|\.[0-9]+)$/)});return(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("form",{className:"w-full max-w-lg",children:[(0,a.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:(0,a.jsxs)("div",{className:"w-full px-3",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Name (optional)"}),(0,a.jsx)("p",{className:"text-gray-600 text-xs italic",children:"This is stored on-chain so you can identify it. The shorter, the cheaper."}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-password",type:"text",placeholder:"Scott's Account",onChange:function(e){return H(e.target.value)}})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0 align-baseline",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Primary Account Address"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"grid-primary-address",type:"text",placeholder:r,onChange:function(e){return c(e.target.value)}}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"Please fill out this field."})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Daily ETH withdrawal limit"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-primary-eth-limit",type:"number",min:"0",placeholder:"0.5",value:v,onChange:function(e){return function(e){var t=X(e),n=t?f.vz(e,"ether").toString():"";k(t?e:""),A(n)}(e.target.value)}})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Safekeeper Account Address"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"grid-safekeeper-address",type:"text",placeholder:"0x...",value:b,onChange:function(e){return g(e.target.value)}}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"Please fill out this field."})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Daily ETH withdrawal limit"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-safekeeper-eth-limit",type:"number",min:"0",placeholder:"0.02",value:T,onChange:function(e){return function(e){var t=X(e),n=t?f.vz(e,"ether").toString():"";C(t?e:""),E(n)}(e.target.value)}})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Initial ETH Deposit (optional)"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"grid-safekeeper-address",type:"text",placeholder:"0",value:L,onChange:function(e){return function(e){var t=X(e),n=t?f.vz(e,"ether").toString():"";W(t?e:""),F(n)}(e.target.value)}}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"Optional."})]})})]}),(0,a.jsx)("button",{type:"button",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){h.UJ(l)?h.UJ(b)?l===b?alert("Safekeeper account can not be the same as main account"):parseInt(j)<=0||isNaN(parseInt(j))?alert("Main account withdrawal limit must be positive and must be a number"):parseInt(D)<=0||isNaN(parseInt(D))?alert("Safekeeper account withdrawal limit must be positive and must be a number"):P({onSuccess:function(e){return window.alert("Savings Account successfully created. Refresh to view your updated account details")},onError:function(e){return window.alert(e.message)}}):alert("Safekeeper account is not a valid Ethereum address"):alert("Main account is not a valid Ethereum address")},children:"Create Savings Account"})]})}function g(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){g(s,a,r,o,i,"next",e)}function i(e){g(s,a,r,o,i,"throw",e)}o(void 0)}))}}function v(e){var t=(0,p.Nr)().account,n=e.instanceAddress,r=e.isMain,s=(0,m.useState)(""),o=s[0],i=s[1],l=(0,m.useState)(""),c=l[0],x=l[1],h=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:r?"getMainAccountWithdrawalLimit":"getSafekeeperAccountWithdrawalLimit",params:{}}),w=h.data,b=h.runContractFunction,g=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:r?"getMainAccountLastWithdrawalDay":"getSafekeeperAccountLastWithdrawalDay",params:{}}),v=g.data,k=g.runContractFunction,N=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:r?"mainUserWithdrawal":"safekeeperUserWithdrawal",params:{}}).runContractFunction,j=(0,p.py)({type:"native",amount:c,receiver:n}),A=j.fetch,S=(j.error,j.isFetching,function(){var e=y(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().toString();case 2:return e.next=4,k().toString();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return(0,m.useEffect)((function(){t&&S()}),[t]),(0,m.useEffect)((function(){""!==c&&A({onSuccess:function(){var t=y(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("success"),e.handleSuccess(n,1),t.next=4,n.wait(1);case 4:k();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(e){return window.alert(e.message)}})}),[c]),(0,a.jsx)("div",{className:"w-full max-w-lg mt-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"ETH Balance"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:e.ethBalance?f.dF(e.ethBalance)+" ETH":"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:y(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEthBalance({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Show ETH balance"})}),(0,a.jsxs)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Your Daily Limit"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:w?f.dF(w)+" ETH":"..."})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Last withdrawal"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:v?e.displayLastWithdrawalDay(v.toString()):"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:y(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Get Wdrawal data"})}),(0,a.jsx)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:y(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N({onSuccess:function(){var t=y(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleSuccess(n,1),t.next=3,n.wait(1);case 3:k();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(e){return window.alert(e.message+" You may have already made a withdrawal today.")}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Make Eth Withdrawal Now"})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0 mt-10",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Or"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",placeholder:"ETH amount",value:o,onChange:function(e){return i(e.target.value)}})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0 mt-16",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){if(u.regex.test(o)){var e=f.vz(o,"ether").toString();x(e)}else window.alert("Withdrawal amount is not valid")},children:"Deposit ETH"})}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"You can also choose to deposit by sending ETH directly to the contract address listed at the top of the page."})]})})}function k(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){k(s,a,r,o,i,"next",e)}function i(e){k(s,a,r,o,i,"throw",e)}o(void 0)}))}}function j(e){var t=e.instanceAddress,n=e.isMain,r=(0,m.useState)(""),s=r[0],o=r[1],i=(0,m.useState)(""),l=i[0],c=i[1],x=(0,p.JX)({abi:u.instanceAbi,contractAddress:t,functionName:"getTokenWithdrawalData",params:{_tokenAddress:e.tokenDropdown[e.tokenDropdownIndex].contractAddress}}),h=x.data,w=x.runContractFunction,b=(0,p.JX)({abi:u.instanceAbi,contractAddress:t,functionName:n?"transferErcTokenMain":"transferErcTokenSafekeeper",params:{_tokenAddress:e.tokenDropdown[e.tokenDropdownIndex].contractAddress}}),g=(b.data,b.runContractFunction),y=(0,p.JX)({abi:u.erc20Abi,contractAddress:e.tokenDropdown[e.tokenDropdownIndex].contractAddress,functionName:"transfer",params:{_to:t,_value:l}}),v=(y.data,y.runContractFunction);(0,m.useEffect)((function(){console.log("depositAmount_Wei : ",l),""!==l&&0!==e.tokenDropdownIndex&&v({onSuccess:function(){var t=N(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleSuccess(n,2),t.next=3,n.wait(1);case 3:w();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(e){return window.alert(e.message)}})}),[l]);return(0,a.jsx)("div",{className:"w-full max-w-lg mt-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full max-w-lg px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Select Token"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{className:"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:function(t){var n=t.target;"Select"!==n.value&&e.setTokenDropdownIndex(n.selectedIndex)},children:e.tokenDropdown.map((function(e,t){return(0,a.jsxs)("option",{value:e.name,children:["".concat(e.name)," ","0"===e.index?"":"(".concat(e.symbol,")")]},e.contractAddress)}))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,a.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Or"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:e.newTokenAddress,onChange:function(t){return e.setNewTokenAddress(t.target.value)},placeholder:"Paste token address"})})]}),(0,a.jsx)("div",{className:"w-full md:w-1/4 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 md:mt-7 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){return e.handleAddNewToken()},children:"Add"})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Balance"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:e.tokenBalance?f.dF(e.tokenBalance.toString()).toString():"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:N(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.tokenDropdownIndex){t.next=6;break}return t.next=3,e.getTokenBalance({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=window.alert("Select a token in the dropdown menu first");case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)}))),children:"Get Token Balance"})}),(0,a.jsxs)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Your Daily Limit"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:h&&n?f.bM(h[0].toString()).toString():h&&!n?f.bM(h[1].toString()).toString():"..."})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Last Withdrawal"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:h&&n?e.displayLastWithdrawalDay(h[2].toString()):h&&!n?e.displayLastWithdrawalDay(h[3].toString()):"..."})]}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:N(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0!==e.tokenDropdownIndex?w({onSuccess:function(e){return console.log(e.toString())},onError:function(e){return window.alert(e.message)}}):window.alert("Select a token in the dropdown menu first"));case 1:case"end":return t.stop()}}),t)}))),children:"Get Wdrawal Data"}),(0,a.jsx)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:N(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","0"===h[0].toString()?window.alert("You have not set withdrawal limits yet. Go to the 'Set ERC20 Withdrawal Limits' tab first"):0!==e.tokenDropdownIndex?g({onSuccess:function(){var t=N(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleSuccess(n,2),t.next=3,n.wait(1);case 3:w();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(e){return window.alert(e.message)}}):window.alert("Press buttons to get token balance and withdrawal data first"));case 1:case"end":return t.stop()}}),t)}))),children:"Make Token Withdrawal Now"})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0 mt-10",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Or Make Deposit"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",placeholder:"Token amount",value:s,onChange:function(e){return o(e.target.value)}})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0 mt-16",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){if(u.regex.test(s)){var t=f.vz(s,e.tokenDropdown[e.tokenDropdownIndex].decimals).toString();c(t)}else window.alert("Withdrawal amount is not valid")},children:"Deposit Token"})}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"You can also choose to deposit by sending the token directly to the contract address listed at the top of the page."})]})})}function A(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){A(s,a,r,o,i,"next",e)}function i(e){A(s,a,r,o,i,"throw",e)}o(void 0)}))}}function T(e){var t=(0,p.Nr)().account,n=e.instanceAddress,r=(0,m.useState)(""),s=r[0],o=r[1],l=(0,m.useState)(""),c=l[0],x=l[1],w=(0,m.useState)(t),b=w[0],g=w[1],y=(0,i.lm)(),v=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:"getSafekeeperAccountBigWithdrawalDay",params:{}}),k=v.data,N=v.runContractFunction,j=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:"mainAccountMakeBigWithdrawal",params:{_withdrawalAmount:c,_withdrawalAddress:b}}),A=(j.data,j.runContractFunction);(0,m.useEffect)((function(){console.log("withdraw: ",c),""!==c&&A({onSuccess:function(t){return e.handleSuccess(t,1)},onError:function(e){return window.alert("Withdrawal may not be authorized")}})}),[c]);!function(){var e=S(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wait(1);case 3:updateUIValues(),y({type:"info",message:"Transaction Complete!",title:"Transaction Notification",position:"topR",icon:"bell"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))}();return(0,a.jsx)("div",{className:"w-full max-w-lg mt-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Date when a large withdrawal was most recently enabled"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:k?e.displayLastWithdrawalDay(k.toString()):"..."}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"Your safekeeper account holder must enable a large withdrawal before you can make it."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/4 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 md:mt-12 text-white font-bold py-2 px-4 rounded ml-auto",onClick:S(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Get Date"})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0 mt-8",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"ETH Balance"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:e.ethBalance?f.dF(e.ethBalance)+" ETH":"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0 mt-8",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:S(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEthBalance({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Show ETH balance"})}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Withdrawal Amount (in ETHER)"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:s,onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Amount"})]}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Send To"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",value:b,onChange:function(e){return g(e.target.value)},type:"text",placeholder:"You can withdraw to your main address or another"}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"You may withdraw to your main account address, or another address. Specify here."})]}),(0,a.jsx)("div",{className:"w-full md:w-2/3 px-3 mb-6 mt-10 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){if(u.regex.test(s)){var e=f.vz(s,"ether").toString();h.UJ(b)?x(e):window.alert("Withdrawal Address is not a valid Ethereum address")}else window.alert("Withdrawal amount is not valid")},children:"Make Large ETH withdrawal"})})]})})}function C(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){C(s,a,r,o,i,"next",e)}function i(e){C(s,a,r,o,i,"throw",e)}o(void 0)}))}}function D(e){var t=(0,p.Nr)().account,n=e.instanceAddress,r=(e.isMain,(0,m.useState)("")),s=r[0],o=r[1],i=(0,m.useState)(""),l=i[0],c=i[1],x=(0,m.useState)(t),w=x[0],b=x[1],g=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:"getSafekeeperAccountBigWithdrawalDay",params:{}}),y=g.data,v=g.runContractFunction,k=(0,p.JX)({abi:u.instanceAbi,contractAddress:n,functionName:"mainAccountMakeBigTokenWithdrawal",params:{_tokenAddress:e.tokenDropdown[e.tokenDropdownIndex].contractAddress,_withdrawalAmount:l,_withdrawalAddress:w}}),N=(k.data,k.runContractFunction),j=function(){if(console.log("handle"),u.regex.test(s)){var t=f.vz(s,e.tokenDropdown[e.tokenDropdownIndex].decimals).toString(),n=h.UJ(w);w===e.tokenDropdown[e.tokenDropdownIndex].contractAddress?window.alert("Withdrawal address is set to token address. This will result in the loss of your funds. Please change the withdrwal address to a valid Ethereum address that you control"):n?c(t):window.alert("Withdrawal Address is not a valid Ethereum address")}else window.alert("Withdrawal amount is not valid")};(0,m.useEffect)((function(){""!==l&&_(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N({onSuccess:function(t){return e.handleSuccess(t,2)},onError:function(e){return window.alert(e.message)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}),[l]);return(0,a.jsx)("div",{className:"w-full max-w-lg mt-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Date when a large withdrawal was most recently enabled"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:y?e.displayLastWithdrawalDay(y.toString()):"..."}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"Your safekeeper account holder must enable a large withdrawal before you can make it."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/4 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 md:mt-12 text-white font-bold py-2 px-4 rounded ml-auto",onClick:_(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Get Date"})}),(0,a.jsxs)("div",{className:"w-full max-w-lg px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Select Token"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{className:"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:function(t){var n=t.target;"Select"!==n.value&&e.setTokenDropdownIndex(n.selectedIndex)},children:e.tokenDropdown.map((function(e,t){return(0,a.jsxs)("option",{value:e.name,children:["".concat(e.name)," ","0"===e.index?"":"(".concat(e.symbol,")")]},e.contractAddress)}))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,a.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Or"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:e.newTokenAddress,onChange:function(t){return e.setNewTokenAddress(t.target.value)},placeholder:"Paste token address"})})]}),(0,a.jsx)("div",{className:"w-full md:w-1/4 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 md:mt-7 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){return e.handleAddNewToken()},children:"Add"})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Balance"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:e.tokenBalance?f.dF(e.tokenBalance.toString()).toString():"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:_(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.tokenDropdownIndex){t.next=6;break}return t.next=3,e.getTokenBalance({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=window.alert("Select a token in the dropdown menu first");case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)}))),children:"Get Token Balance"})}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Withdrawal Amount"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:s,onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Amount"})]}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Send To"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",value:w,onChange:function(e){return b(e.target.value)},type:"text",placeholder:"You can withdraw to your main address or another"}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"You may withdraw to your main account address, or another address. Specify here."})]}),(0,a.jsx)("div",{className:"w-full md:w-2/3 px-3 mb-6 mt-10 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:_(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0!==e.tokenDropdownIndex?j():window.alert("Choose a token from the dropdown menu first"));case 1:case"end":return t.stop()}}),t)}))),children:"Make Large ERC20 withdrawal"})})]})})}function E(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){E(s,a,r,o,i,"next",e)}function i(e){E(s,a,r,o,i,"throw",e)}o(void 0)}))}}function L(e){var t=e.instanceAddress,n=e.isMain;console.log(n);var r=(0,m.useState)(""),s=r[0],o=r[1],l=(0,m.useState)(""),c=l[0],x=l[1],h=(0,m.useState)(""),w=h[0],b=h[1],g=(0,m.useState)(""),y=g[0],v=g[1],k=(0,i.lm)(),N=(0,p.JX)({abi:u.instanceAbi,contractAddress:t,functionName:"getTokenWithdrawalData",params:{_tokenAddress:e.tokenDropdown[e.tokenDropdownIndex].contractAddress}}),j=N.data,A=N.runContractFunction,S=(0,p.JX)({abi:u.instanceAbi,contractAddress:t,functionName:"setTokenLimits",params:{_tokenAddress:e.tokenDropdown[e.tokenDropdownIndex].contractAddress,_mainAccountLimit:c,_safekeeperAccountLimit:y}}).runContractFunction;(0,m.useEffect)((function(){console.log("mainUserLimit_FORMATTED : ",c),console.log("safekeeperUserLimit_FORMATTED : ",y),""!==c&&""!==y&&s>=w&&S()}),[c,y]);!function(){var e=M(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wait(1);case 3:k({type:"info",message:"Transaction Complete!",title:"Transaction Notification",position:"topR",icon:"bell"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))}();var T=function(){var t=u.regex.test(s),n=u.regex.test(w);if(console.log("isNumMain : ",t),console.log("isNumSafekeeper : ",n),t&&n){var a=f.vz(s,e.tokenDropdown[e.tokenDropdownIndex].decimals).toString(),r=f.vz(w,e.tokenDropdown[e.tokenDropdownIndex].decimals).toString();x(a),v(r)}else window.alert("Withdrawal amount is not valid")};return(0,a.jsxs)("div",{className:"w-full max-w-lg mt-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full max-w-lg px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Select Token"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{className:"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:function(t){var n=t.target;"Select"!==n.value&&e.setTokenDropdownIndex(n.selectedIndex)},children:e.tokenDropdown.map((function(e,t){return(0,a.jsxs)("option",{value:e.name,children:["".concat(e.name)," ","0"===e.index?"":"(".concat(e.symbol,")")]},e.contractAddress)}))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,a.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Or"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:e.newTokenAddress,onChange:function(t){return e.setNewTokenAddress(t.target.value)},placeholder:"Paste token address"})})]}),(0,a.jsx)("div",{className:"w-full md:w-1/4 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 md:mt-7 text-white font-bold py-2 px-4 rounded ml-auto",onClick:function(){return e.handleAddNewToken()},children:"Add"})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("p",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Balance"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:e.tokenBalance?f.dF(e.tokenBalance.toString()).toString():"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:M(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.tokenDropdownIndex){t.next=6;break}return t.next=3,e.getTokenBalance({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=window.alert("Select a token in the dropdown menu first");case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)}))),children:"Get Token Balance"})}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Daily Limit"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:j&&n?j.toString()[0]:j&&!n?j.toString()[1]:"..."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0 mt-6",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:M(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0!==e.tokenDropdownIndex?A({onSuccess:function(e){return console.log(e.toString())},onError:function(e){return window.alert(e.message)}}):window.alert("Select a token in the dropdown menu first"));case 1:case"end":return t.stop()}}),t)}))),children:"Get Daily Limit"})}),(0,a.jsx)("p",{className:"px-3 text-red-500 text-xs italic",children:"If Daily Limit is not 0, then your daily limit has already been set and may not be reset. Otherwise, you may set a daily limit for both your main account and your safekeeper account below."}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0 mt-8",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Main User Limit"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:s,onChange:function(e){return o(e.target.value)},placeholder:"Tokens per day"})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0 mt-8",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Safekeeper User Limit"}),(0,a.jsx)("input",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",value:w,onChange:function(e){return b(e.target.value)},placeholder:"Tokens per day"})]})]}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:M(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0!==e.tokenDropdownIndex?T(function(){var t=M(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleSuccess(n),t.next=3,n.wait(1);case 3:A();case 4:case"end":return t.stop()}}),t)})))}()):window.alert("Select Token from Dropdown first"));case 1:case"end":return t.stop()}}),t)}))),children:"Set Token Limits"})]})}function W(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){W(s,a,r,o,i,"next",e)}function i(e){W(s,a,r,o,i,"throw",e)}o(void 0)}))}}function I(e){var t=e.instanceAddress,n=(0,p.JX)({abi:u.instanceAbi,contractAddress:t,functionName:"getSafekeeperAccountBigWithdrawalDay",params:{}}),r=n.data,s=n.runContractFunction,o=(0,p.JX)({abi:u.instanceAbi,contractAddress:t,functionName:"safekeeperAccountEnableBigWithdrawal",params:{}}),i=(o.data,o.runContractFunction);return(0,a.jsx)("div",{className:"w-full max-w-lg mt-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-3/4 px-3 mb-6 md:mb-0",children:[(0,a.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Date when a large withdrawal was most recently enabled"}),(0,a.jsx)("p",{className:"appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",children:r?e.displayLastWithdrawalDay(r.toString()):"..."}),(0,a.jsx)("p",{className:"text-red-500 text-xs italic",children:"Your safekeeper account holder must enable a large withdrawal before you can make it."})]}),(0,a.jsx)("div",{className:"w-full md:w-1/4 px-3 mb-6 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 md:mt-12 text-white font-bold py-2 px-4 rounded ml-auto",onClick:B(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({onSuccess:function(e){return console.log(e)},onError:function(e){return window.alert(e.message)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Get Date"})}),(0,a.jsx)("div",{className:"w-full md:w-2/3 px-3 mb-6 mt-10 md:mb-0",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-auto",onClick:B(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i({onSuccess:function(){var t=B(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleSuccess(n),t.next=3,n.wait(1);case 3:s();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(e){return window.alert(e.message)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Enable Big Withdrawal"})})]})})}function F(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){F(s,a,r,o,i,"next",e)}function i(e){F(s,a,r,o,i,"throw",e)}o(void 0)}))}}function R(e){var t=(0,p.Nr)(),n=t.account,r=t.chainId,s=parseInt(r),o=e.instanceAddress,l=e.isMain,c=(0,m.useState)([{index:"0",name:"Select",contractAddress:"none",decimals:"0"}]),x=c[0],f=c[1],w=(0,m.useState)(""),b=w[0],g=w[1],y=(0,m.useState)(!1),k=y[0],N=y[1],A=(0,m.useState)(0),S=A[0],C=A[1],_=(0,m.useState)(1),E=_[0],M=_[1],W=(0,i.lm)(),B=(0,p.JX)({abi:u.instanceAbi,contractAddress:o,functionName:"getEthBalance",params:{}}),F=B.data,R=B.runContractFunction,H=(0,p.JX)({abi:u.instanceAbi,contractAddress:o,functionName:"getTokenBalance",params:{_tokenAddress:x[S].contractAddress}}),J=H.data,O=H.runContractFunction,P=(0,p.JX)({abi:u.instanceAbi,contractAddress:o,functionName:"getName",params:{}}),X=P.data,Y=P.runContractFunction,U=(0,p.JX)({abi:u.erc20Abi,contractAddress:b,functionName:"name",params:{}}),G=(U.data,U.runContractFunction),V=(0,p.JX)({abi:u.erc20Abi,contractAddress:b,functionName:"symbol",params:{}}),K=(V.data,V.runContractFunction),Q=(0,p.JX)({abi:u.erc20Abi,contractAddress:b,functionName:"decimals",params:{}}),$=(Q.data,Q.runContractFunction),q=function(){var e=z(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.UJ(b)){e.next=6;break}return window.alert("Invalid token address"),e.abrupt("return");case 6:N(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){var e=function(){var e=z(d().mark((function e(){var t,n,a,r,o,i,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l?"mainAccountTokens"+s:"safekeeperAccountTokens"+s,n=(n=JSON.parse(window.localStorage.getItem(t)))&&n.length?n:[],-1===n.findIndex((function(e,t){return e.contractAddress===b}))){e.next=9;break}return window.alert("Item is already in your list"),e.abrupt("return");case 9:return e.next=11,G();case 11:return a=e.sent.toString(),e.next=14,K();case 14:return r=e.sent.toString(),e.next=17,$();case 17:o=e.sent.toString(),i={index:n.length+1,name:a,symbol:r,contractAddress:b,decimals:o},n.push(i),c=l?"mainAccountTokens"+s:"safekeeperAccountTokens"+s,window.localStorage.setItem(c,JSON.stringify(n)),f((function(e){return e.concat(i)})),C(n.length),g(""),window.alert("Token added");case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();k&&(e(),N(!1))}),[k]),(0,m.useEffect)((function(){var e=function(){var e=z(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:t=l?"mainAccountTokens"+s:"safekeeperAccountTokens"+s,n=(n=JSON.parse(window.localStorage.getItem(t)))&&n.length?n:[],a=n.filter((function(e,t,n){return t===n.findIndex((function(t){return t.contractAddress===e.contractAddress}))})),f((function(e){return e.concat(a).filter((function(e,t,n){return n.findIndex((function(t){return t.contractAddress===e.contractAddress}))===t}))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e()}),[n,s]),(0,m.useEffect)((function(){0!==S&&z(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}),[S]);var Z=function(){var e=z(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wait(1);case 3:W({type:"info",message:"Transaction Complete!",title:"Transaction Notification",position:"topR",icon:"bell"}),ee(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(e){1===e?R():2===e&&O()},te=function(e){var t=parseInt(e),n=Math.floor(Date.now()/1e3/60/60/24);return 0===t?"Never":n-t===0?"Today":n-t<30?n-t+"d ago":n-t<365?Math.floor((n-t)/30)+"mo ago":n-t>=365?"Over a year ago":"Could not determine last withdrawal date"},ne="inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300",ae="inline-block p-4 text-blue-600 bg-gray-100 rounded-t-lg active dark:bg-gray-800 dark:text-blue-500";return(0,a.jsxs)(a.Fragment,{children:[l?(0,a.jsxs)("p",{children:["Smart Contract Address: ",X?X.toString():""," (",o?o.toString():"",")"]}):(0,a.jsxs)("p",{children:["You are safekeeping: ",X?X.toString():""," (",o?o.toString():"",")"]}),(0,a.jsxs)("ul",{className:"flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400",children:[(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return M(1)},className:1===E?ae:ne,children:"ETH"})}),(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return M(2)},className:2===E?ae:ne,children:"ERC20 Tokens"})}),l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return M(3)},className:3===E?ae:ne,children:"Large ETH Withdrawals"})}),(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return M(4)},className:4===E?ae:ne,children:"Large ERC20 Withdrawals"})}),(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return M(5)},className:5===E?ae:ne,children:"Set ERC20 Withdrawal Limits"})})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return M(6)},className:6===E?ae:ne,children:"Enable Large Withdrawal"})})})]}),(0,a.jsxs)("div",{children:[1===E?(0,a.jsx)(v,{instanceAddress:o,isMain:l,ethBalance:F,getEthBalance:R,displayLastWithdrawalDay:te,handleSuccess:Z}):[],2===E?(0,a.jsx)(j,{instanceAddress:o,isMain:l,tokenDropdown:x,tokenDropdownIndex:S,newTokenAddress:b,setNewTokenAddress:g,setTokenDropdownIndex:C,handleAddNewToken:q,getTokenBalance:O,tokenBalance:J,displayLastWithdrawalDay:te,handleSuccess:Z}):[],3===E?(0,a.jsx)(T,{instanceAddress:o,ethBalance:F,getEthBalance:R,displayLastWithdrawalDay:te,handleSuccess:Z}):[],4===E?(0,a.jsx)(D,{instanceAddress:o,isMain:l,tokenDropdown:x,tokenDropdownIndex:S,newTokenAddress:b,setNewTokenAddress:g,setTokenDropdownIndex:C,handleAddNewToken:q,getTokenBalance:O,tokenBalance:J,displayLastWithdrawalDay:te,handleSuccess:Z}):[],5===E?(0,a.jsx)(L,{instanceAddress:o,isMain:l,tokenDropdown:x,tokenDropdownIndex:S,setTokenDropdownIndex:C,newTokenAddress:b,setNewTokenAddress:g,handleAddNewToken:q,getTokenBalance:O,tokenBalance:J,displayLastWithdrawalDay:te,handleSuccess:Z}):[],6===E?(0,a.jsx)(I,{instanceAddress:o,displayLastWithdrawalDay:te,handleSuccess:Z}):[]]})]})}function H(e){return(0,a.jsxs)("div",{className:"w-full max-w-lg mt-8",children:[(0,a.jsx)("h2",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-900",children:"How it works:"}),(0,a.jsxs)("ul",{className:"max-w-md space-y-1 text-gray-500 list-inside dark:text-gray-500",children:[(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"The Savings Accounts are free. "}),"There is no fee, other than gas costs, to open and operate an account."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"Read the Background tab to understand the general setup. "}),"The account is for people who want an extra layer of security for users who control their own wallet. Note: This can NOT be used to back up centralized exchange accounts."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"The safekeeper account user should be someone (semi-)trusted. "}),"This can be a friend, spouse, or family member. They need to have a wallet address that they control (not on a centralized exchange). They should be (semi-)trusted, because if they choose to steal from you, they can gain access to a small portion of your funds (depending on the withdrawal limits you set)."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"Create a New Savings Account by clicking the tab and specifying a main account and a safekeeper account. "}),"After you create the Savings Account, you may deposit ETH or any ERC20 token by using our interface, or by sending it directly to the Savings Account contract address. There are unlimited deposits."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"Each wallet address can only have one main account, and be the safekeeper for only one other account. "}),"However, any wallet address can set up accounts and deposit tokens on behalf of others, such as for a family member or friend, as long as you know their public wallet address. Doing so will set up a new Savings Account at a new address for the given user, who can then access it themselves. But remember, your wallet address can only be the Safekeeper Account for one other account."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"You can only set a withdrawal limit once per ERC20 token. "}),"Each ERC20 token must individually be given a withdrawal limit. ERC20 tokens are initialized with a daily withdrawal limit of 0. You may set the limit either before or after depositing."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"Be mindful of setting appropriate withdrawal limits."})," Tokens with very high circulating supply, like SHIBA, should have correspondingly higher daily withdrawal limits."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"You can withdraw ETH, and each token, once per day. "}),"For example, if you have ETH, DAI, and LINK in your account, you may withdraw each of them once per day."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"The day resets at 0:00 UTC time. "}),"It is not 24 hours after your last withdrawal. If you withdraw at 23:59 UTC time on Wednesday, you can withdraw again two minutes later, at 00:01 UTC time, on Thursday."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"For the daily withdrawal limits, we recommend a ratio between the Main Account and the Safekeeper Account of about 20:1. "}),"For example, a Main Account Daily Limit of 1 ETH, safekeeper Account Daily Limit of 0.05 ETH. This will depend on the total amount of ETH -- and each token -- you plan on depositing."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"When the safekeeper Account enables a large withdrawal, it applies to both ETH and any ERC20 token. "}),"Large withdrawals do not need to be authorized for each token. One authorization applies to all ETH and all tokens in the account."]})]}),(0,a.jsxs)("li",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-green-500 dark:text-green-400 flex-shrink-0 mt-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"font-semibold text-gray-900 dark:text-black:400",children:"Once a large withdrawal is authorized, the main account user may withdraw as much and as frequently that entire day, until 0:00 UTC time the next day. "}),"Large withdrawals enable the main account user to have free and unlimied access to their funds for that day."]})]})]})]})}function J(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(a,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){J(s,a,r,o,i,"next",e)}function i(e){J(s,a,r,o,i,"throw",e)}o(void 0)}))}}function P(){var e=(0,p.Nr)(),t=(e.Moralis,e.isWeb3Enabled),n=e.chainId,r=e.account,s=parseInt(n);console.log("chainId : ",s);var o=s in u.contractAddresses?u.contractAddresses[s][0]:null;console.log("savingsFactoryAddress : ",o);var l="0x0000000000000000000000000000000000000000",c=(0,m.useState)(""),h=(c[0],c[1],(0,m.useState)(0)),f=h[0],w=h[1],g=(0,i.lm)(),y=(0,p.JX)({abi:u.factoryAbi,contractAddress:o,functionName:"getContractFromMainAddress",params:{_mainAccount:r}}),v=y.data,k=y.runContractFunction,N=(0,p.JX)({abi:u.factoryAbi,contractAddress:o,functionName:"getContractFromSafekeeperAddress",params:{_safekeeperAccount:r}}),j=N.data,A=N.runContractFunction,S=function(){var e=O(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.sent.toString(),e.next=5,A().toString();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){t&&S()}),[t,r]);!function(){var e=O(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.wait(1);case 3:S(),g({type:"info",message:"Transaction Complete!",title:"Transaction Notification",position:"topR",icon:"bell"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))}();var T="inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300",C="inline-block p-4 text-blue-600 bg-gray-100 rounded-t-lg active dark:bg-gray-800 dark:text-blue-500";return console.log("contractInstanceFromBackuop : ",j),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("ul",{className:"flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400",children:[(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return w(0)},className:0===f?C:T,children:"Background"})}),(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return w(1)},className:1===f?C:T,children:"How It Works"})}),(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return w(2)},className:2===f?C:T,children:"Your Account"})}),(0,a.jsx)("li",{className:"mr-2",children:(0,a.jsx)("a",{href:"#",onClick:function(){return w(3)},className:3===f?C:T,children:"Safekeeping"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",onClick:function(){return w(4)},className:4===f?C:T,children:"Create New Savings Account!"})})]}),0===f?(0,a.jsx)(x,{}):[],1===f?(0,a.jsx)(H,{}):[],t&&v!==l&&2===f?(0,a.jsx)(R,{isMain:!0,instanceAddress:v}):(0,a.jsx)("p",{children:"You do not have a primary account"}),t&&j!==l&&3===f?(0,a.jsx)(R,{isMain:!1,instanceAddress:j}):(0,a.jsx)("p",{children:"You are not safekeeping anyones account"}),t&&4===f?(0,a.jsx)(b,{}):[]]})}var X=["31337","5","421613","80001","42161","137"];function Y(){var e=(0,p.Nr)(),t=e.isWeb3Enabled,n=e.chainId;return(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsxs)(r.default,{children:[(0,a.jsx)("title",{children:"Create Next App"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(l,{}),t?(0,a.jsx)("div",{children:X.includes(parseInt(n).toString())?(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(P,{className:"p-8"})}):(0,a.jsx)("div",{children:"Please switch to a supported chainId. The supported Chain Ids are: ".concat(X)})}):(0,a.jsx)("div",{children:"Please connect to a Wallet"})]})}},7160:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},9008:function(e,t,n){e.exports=n(83121)},37917:function(e){"use strict";e.exports=JSON.parse('{"5":["0x7f39459c36B2DA813cFcf4E93C799D9F5430fF1C",null],"31337":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]}')},85028:function(e){"use strict";e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},83753:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"SavingsAccountFactory__AccountAlreadyExists","type":"error"},{"inputs":[],"name":"SavingsAccountFactory__OnlyOwner","type":"error"},{"inputs":[],"name":"SavingsAccountFactory__SafekeeperAccountAlreadyExists","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"mainAccount","type":"address"},{"indexed":true,"internalType":"address","name":"safekeeperAccount","type":"address"},{"indexed":false,"internalType":"uint256","name":"mainAccountWithdrawalLimit","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"safekeeperAccountWithdrawalLimit","type":"uint256"},{"indexed":false,"internalType":"string","name":"name","type":"string"}],"name":"SavingsAccountCreated","type":"event"},{"inputs":[{"internalType":"address","name":"_mainAccount","type":"address"},{"internalType":"address","name":"_safekeeperAccount","type":"address"},{"internalType":"uint256","name":"_mainAccountWithdrawalLimit","type":"uint256"},{"internalType":"uint256","name":"_safekeeperAccountWithdrawalLimit","type":"uint256"},{"internalType":"string","name":"_name","type":"string"}],"name":"createSavingsAccount","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_mainAccount","type":"address"}],"name":"getContractFromMainAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_safekeeperAccount","type":"address"}],"name":"getContractFromSafekeeperAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"i_owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"kill","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},4463:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_mainAccount","type":"address"},{"internalType":"address","name":"_safekeeperAccount","type":"address"},{"internalType":"uint256","name":"_mainAccountWithdrawalLimit","type":"uint256"},{"internalType":"uint256","name":"_safekeeperAccountWithdrawalLimit","type":"uint256"},{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"payable","type":"constructor"},{"inputs":[],"name":"SavingsAccount__AlreadySetTokenLimit","type":"error"},{"inputs":[],"name":"SavingsAccount__CallFail","type":"error"},{"inputs":[],"name":"SavingsAccount__LargeWithdrawalNotAuthorized","type":"error"},{"inputs":[],"name":"SavingsAccount__MainWithdrawalAlreadyMadeToday","type":"error"},{"inputs":[],"name":"SavingsAccount__MainWithdrawalLimitTooSmall","type":"error"},{"inputs":[],"name":"SavingsAccount__NotEnoughBalance","type":"error"},{"inputs":[],"name":"SavingsAccount__SafekeeperWithdrawalAlreadyMadeToday","type":"error"},{"inputs":[],"name":"SavingsAccount__SafekeeperWithdrawalLimitTooSmall","type":"error"},{"inputs":[],"name":"SavingsAccount__notOwner","type":"error"},{"inputs":[],"name":"SavingsAccount__notSafekeeper","type":"error"},{"inputs":[],"name":"SECONDS_IN_DAY","outputs":[{"internalType":"uint24","name":"","type":"uint24"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEthBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMainAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMainAccountLastWithdrawalDay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMainAccountWithdrawalLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSafekeeperAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSafekeeperAccountBigWithdrawalDay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSafekeeperAccountLastWithdrawalDay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSafekeeperAccountWithdrawalLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"getTokenBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"getTokenWithdrawalData","outputs":[{"components":[{"internalType":"uint256","name":"mainAccountWithdrawalLimit","type":"uint256"},{"internalType":"uint256","name":"safekeeperAccountWithdrawalLimit","type":"uint256"},{"internalType":"uint256","name":"mainAccountLastWithdrawalDay","type":"uint256"},{"internalType":"uint256","name":"safekeeperAccountLastWithdrawalDay","type":"uint256"}],"internalType":"struct SavingsAccount.TokenWithdrawalData","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_withdrawalAmount","type":"uint256"},{"internalType":"address","name":"_withdrawalAddress","type":"address"}],"name":"mainAccountMakeBigTokenWithdrawal","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_withdrawalAmount","type":"uint256"},{"internalType":"address","name":"_withdrawalAddress","type":"address"}],"name":"mainAccountMakeBigWithdrawal","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"mainUserWithdrawal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"safekeeperAccountEnableBigWithdrawal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"safekeeperUserWithdrawal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_mainAccountLimit","type":"uint256"},{"internalType":"uint256","name":"_safekeeperAccountLimit","type":"uint256"}],"name":"setTokenLimits","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"transferErcTokenMain","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"transferErcTokenSafekeeper","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},98706:function(e){"use strict";e.exports=JSON.parse('{"5":[null],"31337":["0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9",null,null,null,null]}')}},function(e){e.O(0,[774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);